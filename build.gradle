plugins {
    id 'java'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'io.appium:java-client:10.0.0'
    implementation 'org.seleniumhq.selenium:selenium-java:4.35.0'
    testImplementation 'org.testng:testng:7.11.0'
    implementation 'com.aventstack:extentreports:5.1.2'
    implementation 'com.opencsv:opencsv:5.9'
}

test {
    useTestNG() {
        suites 'src/test/resources/testng.xml'
    }

    // Pass specific system properties to the test JVM for CI compatibility
    System.getProperties().each { key, value ->
        if (key.toString().startsWith("app") || 
            key.toString().startsWith("platform") || 
            key.toString().startsWith("device") || 
            key.toString().equals("appium.server.url")) {
            systemProperty key.toString(), value.toString()
        }
    }

    // Print test results
    testLogging {
        events "passed", "skipped", "failed"
        showStandardStreams = true
    }
}